<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Tracker App</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-12">
                <h1>Service Tracker App</h1><img src="images/logo.png" alt="Trijoshh Logo" width="200">

            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <button class="btn btn-primary" data-toggle="modal" data-target="#addServiceRequestModal">Add Service Request</button>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-md-3">
                <div class="card text-white bg-primary mb-3" style="max-width: 18rem;">
                    <div class="card-header">Total Service Requests</div>
                    <div class="card-body">
                        <h5 class="card-title" id="totalServiceRequests">0</h5>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-white bg-warning mb-3" style="max-width: 18rem;">
                    <div class="card-header">Pending Service Requests</div>
                    <div class="card-body">
                        <h5 class="card-title" id="pendingServiceRequests">0</h5>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-white bg-info mb-3" style="max-width: 18rem;">
                    <div class="card-header">In Progress Service Requests</div>
                    <div class="card-body">
                        <h5 class="card-title" id="inProgressServiceRequests">0</h5>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-white bg-success mb-3" style="max-width: 18rem;">
                    <div class="card-header">Delivered Service Requests</div>
                    <div class="card-body">
                        <h5 class="card-title" id="deliveredServiceRequests">0</h5>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-md-12">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Customer Name</th>
                            <th>Contact Number</th>
                            <th>EV Type</th>
                            <th>Ticket No</th>
                            <th>Service Complaint Date</th>
                            <th>Action Taken / Remark</th>
                            <th>Vehicle Delivery Date</th>
                            <th>Amount Received</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="serviceRequestsTableBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="modal fade" id="addServiceRequestModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add Service Request</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="addServiceRequestForm">
                        <div class="form-group">
                            <label for="customerName">Customer Name</label>
                            <input type="text" class="form-control" id="customerName" required>
                        </div>
                        <div class="form-group">
                            <label for="contactNumber">Contact Number</label>
                            <input type="text" class="form-control" id="contactNumber" required>
                        </div>
                        <div class="form-group">
                            <label for="evType">EV Type</label>
                            <select class="form-control" id="evType" required>
                                <option value="">Select EV Type</option>
                                <option value="2 Wheeler Scooty">2 Wheeler Scooty</option>
                                <option value="2 Wheeler Loader">2 Wheeler Loader</option>
                                <option value="3 Wheeler Loader">3 Wheeler Loader</option>
                                <option value="3 Wheeler Scooty">3 Wheeler Scooty</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="ticketNo">Ticket No</label>
                            <input type="text" class="form-control" id="ticketNo" required>
                        </div>
                        <div class="form-group">
                            <label for="serviceComplaintDate">Service Complaint Date</label>
                            <input type="date" class="form-control" id="serviceComplaintDate" required>
                        </div>
                        <div class="form-group">
                            <label for="actionTaken">Action Taken / Remark</label>
                            <textarea class="form-control" id="actionTaken" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="vehicleDeliveryDate">Vehicle Delivery Date</label>
                            <input type="date" class="form-control" id="vehicleDeliveryDate" required>
                        </div>
                        <div class="form-group">
                            <label for="amountReceived">Amount Received</label>
                            <input type="number" class="form-control" id="amountReceived" required>
                        </div>
                        <div class="form-group">
                            <label for="status">Status</label>
                            <select class="form-control" id="status" required>
                                <option value="">Select Status</option>
                                <option value="Pending">Pending</option>
                                <option value="In Progress">In Progress</option>
                                <option value="Delivered">Delivered</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="addServiceRequestBtn">Add Service Request</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let serviceRequests = [];

        $(document).ready(function() {
            $("#addServiceRequestBtn").click(function() {
                let customerName = $("#customerName").val();
                let contactNumber = $("#contactNumber").val();
                let evType = $("#evType").val();
                let ticketNo = $("#ticketNo").val();
                let serviceComplaintDate = $("#serviceComplaintDate").val();
                let actionTaken = $("#actionTaken").val();
                let vehicleDeliveryDate = $("#vehicleDeliveryDate").val();
                let amountReceived = $("#amountReceived").val();
                let status = $("#status").val();

                serviceRequests.push({
                    customerName: customerName,
                    contactNumber: contactNumber,
                    evType: evType,
                    ticketNo: ticketNo,
                    serviceComplaintDate: serviceComplaintDate,
                    actionTaken: actionTaken,
                    vehicleDeliveryDate: vehicleDeliveryDate,
                    amountReceived: amountReceived,
                    status: status
                });

                updateServiceRequestsTable();
                updateDashboard();
                $("#addServiceRequestModal").modal("hide");
                $("#addServiceRequestForm")[0].reset();
            });

            function updateServiceRequestsTable() {
                let tableBody = $("#serviceRequestsTableBody");
                tableBody.html("");
                serviceRequests.forEach(function(serviceRequest, index) {
                    let row = $("<tr>");
                    row.append($("<td>").text(serviceRequest.customerName));
                    row.append($("<td>").text(serviceRequest.contactNumber));
                    row.append($("<td>").text(serviceRequest.evType));
                    row.append($("<td>").text(serviceRequest.ticketNo));
                    row.append($("<td>").text(serviceRequest.serviceComplaintDate));
                    row.append($("<td>").text(serviceRequest.actionTaken));
                    row.append($("<td>").text(serviceRequest.vehicleDeliveryDate));
                    row.append($("<td>").text(serviceRequest.amountReceived));
                    row.append($("<td>").text(serviceRequest.status));
                    row.append($("<td>").html("<button class='btn btn-sm btn-primary' onclick='editServiceRequest(" + index + ")'>Edit</button> <button class='btn btn-sm btn-danger' onclick='deleteServiceRequest(" + index + ")'>Delete</button>"));
                    tableBody.append(row);
                });
            }

            function updateDashboard() {
                let totalServiceRequests = serviceRequests.length;
                let pendingServiceRequests = serviceRequests.filter(function(serviceRequest) {
                    return serviceRequest.status === "Pending";
                }).length;
                let inProgressServiceRequests = serviceRequests.filter(function(serviceRequest) {
                    return serviceRequest.status === "In Progress";
                }).length;
                let deliveredServiceRequests = serviceRequests.filter(function(serviceRequest) {
                    return serviceRequest.status === "Delivered";
                }).length;

                $("#totalServiceRequests").text(totalServiceRequests);
                $("#pendingServiceRequests").text(pendingServiceRequests);
                $("#inProgressServiceRequests").text(inProgressServiceRequests);
                $("#deliveredServiceRequests").text(deliveredServiceRequests);
            }

            function editServiceRequest(index) {
                let serviceRequest = serviceRequests[index];
                $("#customerName").val(serviceRequest.customerName);
                $("#contactNumber").val(serviceRequest.contactNumber);
                $("#evType").val(serviceRequest.evType);
                $("#ticketNo").val(serviceRequest.ticketNo);
                $("#serviceComplaintDate").val(serviceRequest.serviceComplaintDate);
                $("#actionTaken").val(serviceRequest.actionTaken);
                $("#vehicleDeliveryDate").val(serviceRequest.vehicleDeliveryDate);
                $("#amountReceived").val(serviceRequest.amountReceived);
                $("#status").val(serviceRequest.status);
                $("#addServiceRequestBtn").text("Update Service Request");
                $("#addServiceRequestBtn").attr("onclick", "updateServiceRequest(" + index + ")");
                $("#addServiceRequestModal").modal("show");
            }

            function updateServiceRequest(index) {
                let serviceRequest = serviceRequests[index];
                serviceRequest.customerName = $("#customerName").val();
                serviceRequest.contactNumber = $("#contactNumber").val();
                serviceRequest.evType = $("#evType").val();
                serviceRequest.ticketNo = $("#ticketNo").val();
                serviceRequest.serviceComplaintDate = $("#serviceComplaintDate").val();
                serviceRequest.actionTaken = $("#actionTaken").val();
                serviceRequest.vehicleDeliveryDate = $("#vehicleDeliveryDate").val();
                serviceRequest.amountReceived = $("#amountReceived").val();
                serviceRequest.status = $("#status").val();
                updateServiceRequestsTable();
                updateDashboard();
                $("#addServiceRequestModal").modal("hide");
                $("#addServiceRequestForm")[0].reset();
                $("#addServiceRequestBtn").text("Add Service Request");
                $("#addServiceRequestBtn").attr("onclick", "addServiceRequest()");
            }

            function deleteServiceRequest(index) {
                serviceRequests.splice(index, 1);
                updateServiceRequestsTable();
                updateDashboard();
            }
        });
    </script>
</body>
</html>
